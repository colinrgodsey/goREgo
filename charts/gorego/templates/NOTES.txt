goREgo has been deployed!

1. Get the gRPC endpoint:
{{- if contains "ClusterIP" .Values.service.type }}
  # Port-forward to access locally:
  kubectl --namespace {{ .Release.Namespace }} port-forward svc/{{ include "gorego.fullname" . }} 50051:{{ .Values.service.port }}

  # Then use:
  grpc://localhost:50051
{{- else if contains "LoadBalancer" .Values.service.type }}
  export SERVICE_IP=$(kubectl get svc --namespace {{ .Release.Namespace }} {{ include "gorego.fullname" . }} -o jsonpath='{.status.loadBalancer.ingress[0].ip}')
  echo "gRPC endpoint: grpc://$SERVICE_IP:{{ .Values.service.port }}"
{{- end }}

2. Configure Bazel to use goREgo:
  bazel build //... \
    --remote_executor=grpc://localhost:50051 \
    --remote_cache=grpc://localhost:50051

{{- $clusterEnabled := .Values.config.cluster.enabled -}}
{{- if eq $clusterEnabled nil -}}
{{- $clusterEnabled = gt (int .Values.replicaCount) 1 -}}
{{- end }}
{{- if $clusterEnabled }}

3. Cluster Status:
  Clustering is ENABLED with {{ .Values.replicaCount }} replicas.

  Headless service for discovery:
    {{ include "gorego.fullname" . }}-headless.{{ .Release.Namespace }}.svc.cluster.local

  View cluster members:
    kubectl --namespace {{ .Release.Namespace }} get pods -l "app.kubernetes.io/name={{ include "gorego.name" . }}"
{{- else }}

3. Clustering:
  Clustering is DISABLED (single replica mode).
  Set replicaCount > 1 to enable distributed execution.
{{- end }}
